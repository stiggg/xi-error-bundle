parameters:
    symfony.monolog.logger.class: Symfony\Bridge\Monolog\Logger
    monolog.streamhandler.class: Monolog\Handler\StreamHandler
    xi.eventlistener.exception.class: Xi\Bundle\ErrorBundle\EventListener\ExceptionEventListener

services:
    xi.exception_logger:
        class: %symfony.monolog.logger.class%
        arguments: [app]
        calls:
            - [pushHandler, [@xi.exception_logger_handler]]

    xi.exception_logger_handler:
        class: %monolog.streamhandler.class%
        arguments: [%kernel.logs_dir%/exception.%kernel.environment%.log, 200]

    kernel.listener.exception_listener:
        class: %xi.eventlistener.exception.class%
        arguments: [@xi.exception_logger, @kernel]
        tags:
            - { name: kernel.event_listener, event: kernel.exception, method: onKernelException }